;WRICHR.ASM
;PRINT TO SCREEN ONE BYTE
;ARGUMENTS: <INT>0-255
;AUTHOR: CARLOS MONTIERS AGUILERA
;DATE: FEB-2014

ORG 100H

;SET IN CL THE LENGTH OF COMMAND LINE
MOV BX,80H
MOV CX,[BX]

;ASSIGN 10 TO BYTE SOURCE FOR MULTIPLICATION
MOV CH,10
;SET CHAR TO 0
MOV AL,0

;SET BX TO 81 FOR NEXT INC LEFT BX = 82H
;POINTING TO FIRST CHARACTER OF COMMAND LINE
INC BX

GET_CHAR:
;IF NONE CHAR AVAILABLE GO TO PRINT
CMP CL, 0
JE PRINT

;GET LETTER
INC BX
MOV DX, [BX]

;IF IS NOT DIGIT CONTINUE LIKE C KEYWORD
CMP DL, '0'
JL CONTINUE
CMP DL, '9'
JG CONTINUE

;CONVERT CHAR TO DIGIT
SUB DL, '0'
;MULTIPLY BY 10
MUL CH
;SUM DIGIT
ADD AL, DL

CONTINUE:
DEC CL
JMP GET_CHAR

PRINT:

MOV DL,AL
;DIRECT CONSOLE OUTPUT
MOV AH, 06H

CMP DL,255
JNE COMMIT
;IF CHARACTER IS 255 USE OTHER INTERRUPT
;WRITE CHARACTER TO STANDARD OUTPUT
MOV AH, 02H

COMMIT:
INT 21H
RET
